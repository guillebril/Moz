<!DOCTYPE html>
<html>
<head>
	<title></title>
  <script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBTiGB3o_EzPxEIEBcDkaZVpWRgfdNQYOM",
    authDomain: "mozo-c1716.firebaseapp.com",
    databaseURL: "https://mozo-c1716.firebaseio.com",
    projectId: "mozo-c1716",
    storageBucket: "mozo-c1716.appspot.com",
    messagingSenderId: "1094461273343"
  };
  firebase.initializeApp(config);
</script>
</head>
<body>
<h1>Hello world!</h1>


<div onclick="cargaRestaurante('BeGreen 2','Espania 1100')"> cargaRestaurante('BeGreen','Espania 1200')</div>
<div onclick="cargaCategoria('-Kl7xoOS5k1k2Ui_P3-1','Entradas')"> cargaCategoria('','Bebidas')</div>
<div onclick="cargaProductos('-Kl7xoOS5k1k2Ui_P3-1','-Kl7zfzQ2EW8kByw1etg','Papas Rústicas','50','1 porción')"> cargaProductos('restauranteID','catID','Cerveza Patagonia','75','1 pinta')</div>


<button onclick="mostrarDatos()"> Ver</button>
<div onclick="cargaCerveza('-Kl7nk7drN3S6p7rMbiL')"> Cargar menu</div>
<div id='log'></div>
<div id='log2'></div>
<table id='tablaResul'>
</table>

<script type="text/javascript">


      function mostrarDatos(){
        var ref = firebase.database().ref("restaurantes/");
         var restaurantesKeys = [],restaurantesNames = [];
        ref.orderByChild("restaurantes").on("child_added", function(snapshot) {
        restaurantesKeys.push(snapshot.key);
        restaurantesNames.push(snapshot.val().name);
    
          }, function (error) {
             console.log("Error: " + error.code) ;
          });       
        crearTabla(restaurantesKeys,restaurantesNames);
      } 
    
      function crearTabla(restaurantesKeys,restaurantesNames) {
      var tabla = '<tr><td>Names</td><td>Keys</td></tr>';
      for (x in restaurantesNames) 
      { 
        tabla +='<tr><td>'+restaurantesNames[x]+'</td><td>'+ restaurantesKeys[x]+ '</td></tr>' ;
      }
      console.log(tabla);
      document.getElementById('tablaResul').innerHTML = tabla;
      }



	//CARGA RESTAURANTES
    function cargaRestaurante(name, direccion) {
    var restaurantesRef = firebase.database().ref("restaurantes/");
    restaurantesRef.push(
    {
      "name":name,
      "direccion":direccion,
    }
              );
    };
  //CARGA CATEGORIAS
    function cargaCategoria(restauranteID,nameCat) {
    var Ref = firebase.database().ref("restaurantes/"+restauranteID+ "/categorias");
          Ref.push(
    {
      "name": nameCat,
    }
            );
        };
  //CARGA PRODUCTOS
    function cargaProductos(restauranteID,catID,nameProduct,price,size) {
    var Ref = firebase.database().ref("restaurantes/"+restauranteID+ "/categorias/"+catID+"/productos/");
          Ref.push(
    {
      "name": nameProduct,
      "price": price,
      "size":size,
    }
            );
        };


</script>




</body>

</html>



